import{f as R,j as e,R as N,c as w,r as v,u as Y,F as V,a as I,b as m,L as U,d as X,T as j,e as P,S as T,O as W}from"./index.f0d2cd0c.js";import{F as B,a as J}from"./index.esm.f8a27c14.js";import{I as z}from"./index.esm.e7c10f87.js";import{B as $}from"./index.esm.d849b804.js";function q(r,n=[]){const t=Object.assign({},r);for(const i of n)i in t&&delete t[i];return t}function G(r){const{loading:n,src:t,srcSet:i,onLoad:o,onError:s,crossOrigin:l,sizes:h,ignoreFallback:u}=r,[p,x]=v.exports.useState("pending");v.exports.useEffect(()=>{x(t?"loading":"pending")},[t]);const b=v.exports.useRef(),L=v.exports.useCallback(()=>{if(!t)return;k();const g=new Image;g.src=t,l&&(g.crossOrigin=l),i&&(g.srcset=i),h&&(g.sizes=h),n&&(g.loading=n),g.onload=c=>{k(),x("loaded"),o==null||o(c)},g.onerror=c=>{k(),x("failed"),s==null||s(c)},b.current=g},[t,l,i,h,o,s,n]),k=()=>{b.current&&(b.current.onload=null,b.current.onerror=null,b.current=null)};return Y(()=>{if(!u)return p==="loading"&&L(),()=>{k()}},[p,L,u]),u?"loaded":p}var K=(r,n)=>r!=="loaded"&&n==="beforeLoadOrError"||r==="failed"&&n==="onError",A=R(function(n,t){const{htmlWidth:i,htmlHeight:o,alt:s,...l}=n;return e("img",{width:i,height:o,ref:t,alt:s,...l})});A.displayName="NativeImage";var E=R(function(n,t){const{fallbackSrc:i,fallback:o,src:s,srcSet:l,align:h,fit:u,loading:p,ignoreFallback:x,crossOrigin:b,fallbackStrategy:L="beforeLoadOrError",referrerPolicy:k,...g}=n,c=i!==void 0||o!==void 0,d=p!=null||x||!c,F=G({...n,ignoreFallback:d}),O=K(F,L),C={ref:t,objectFit:u,objectPosition:h,...d?g:q(g,["onError","onLoad"])};return O?o||N.createElement(w.img,{as:A,className:"chakra-image__placeholder",src:i,...C}):N.createElement(w.img,{as:A,src:s,srcSet:l,crossOrigin:b,loading:p,referrerPolicy:k,className:"chakra-image",...C})});E.displayName="Image";R((r,n)=>N.createElement(w.img,{ref:n,as:A,className:"chakra-image",...r}));const H="/notes-app/assets/delete.1cc9322c.svg",Q="/notes-app/assets/arrow.ed0c2fa2.svg",M="/notes-app/assets/plus.a40c5c74.svg",Z="/notes-app/assets/setting.cb2d363c.svg",D="/notes-app/assets/hamburger-icon.553c2f89.svg",_=({path:r,name:n})=>e(U,{as:X,to:r,color:"blackAlpha.700",textDecoration:"underline",_hover:{color:"#2c2c2c"},children:n}),ee=()=>{const[r,n]=v.exports.useState({useName:"User",haveLogin:!0,photo:"''"});return e(V,{children:r.haveLogin?e(I,{as:"span",title:"User",alignItems:"center",height:"fit-content",paddingLeft:"5",fontSize:"lg",cursor:"context-menu",_before:{content:r.photo,display:"inline-block",width:"50px",height:"50px",borderRadius:"full",marginRight:"10px",backgroundColor:"hotpink"},children:"User"}):m(I,{width:"full",height:"fit-content",justifyContent:"center",gap:"3",children:[e(_,{path:"login",name:"Login"}),e("span",{children:"|"}),e(_,{path:"sign-up",name:"Sign Up"})]})})},re=N.memo(ee),te=({setFolderState:r})=>m(I,{onClick:()=>{r(t=>({...t,isAddFolder:!0}))},gap:"3",alignItems:"center",paddingLeft:"5",height:"10",_hover:{backgroundColor:"blackAlpha.200"},children:[e("img",{src:M,alt:"plus"}),e(j,{as:"span",children:"Add Folder"})]}),ne=N.memo(te),oe=()=>m(I,{gap:"3",alignItems:"center",height:"10",paddingLeft:"5",_hover:{backgroundColor:"blackAlpha.200"},children:[e("img",{src:Z,alt:"setting"}),e(j,{children:"Setting"})]}),le=N.memo(oe),ie=({fileName:r,folderName:n,setFolderState:t,id:i})=>{const[o,s]=v.exports.useState(!1),{FileID:l}=P(),h=()=>{i===l&&(location.href=`http://${location.host}/notes-app/`),t(u=>({...u,fileList:[...u.fileList.filter(p=>p!==r)],fileId:[...u.fileId.filter(p=>p!==i)]})),localStorage.removeItem(i)};return v.exports.useEffect(()=>{s(l===i?()=>!0:()=>!1)},[l]),m(I,{className:"file",height:"8",alignItems:"center",backgroundColor:o?"blackAlpha.200":"transparent",_hover:{backgroundColor:"blackAlpha.200"},children:[e(U,{href:`/#/${n}/${i}`,display:"flex",paddingInline:"0",paddingLeft:"16",width:"full",height:"full",alignItems:"center",marginRight:"auto",_hover:{textDecoration:"none"},children:r}),e("img",{onClick:h,src:H,alt:""})]})},ae=N.memo(ie);const se=({folderName:r,setFolder:n})=>{var C;const t=(C=localStorage.getItem(r))!=null?C:JSON.stringify({isOpen:!1,fileList:[],inpFileInvalid:!1,inpFileName:"",isAddFile:!1,fileId:[]}),[i,o]=v.exports.useState(JSON.parse(t)),{fileList:s,fileId:l,isOpen:h,inpFileInvalid:u,inpFileName:p,isAddFile:x}=i,{FolderName:b}=P();v.exports.useEffect(()=>{localStorage.setItem(r,JSON.stringify(i)),localStorage.setItem(`${r} fileIdList`,JSON.stringify([...l]))},[s]);const L=()=>{o(a=>({...a,isOpen:!h}))},k=()=>{o(a=>({...a,isOpen:!0})),o(a=>({...a,isAddFile:!0}))},g=a=>{a.preventDefault()},c=()=>{n(a=>({...a,folderList:[...a.folderList.filter(f=>f!==r)]})),o(a=>({...a,fileList:[],fileId:[],isOpen:!1})),l.forEach(a=>{localStorage.removeItem(a)}),localStorage.removeItem(r),localStorage.removeItem(`${r} fileIdList`),b===r&&(location.href=`http://${location.host}/notes-app/`)},d=a=>{a.preventDefault();const f=new Uint32Array(1);if(crypto.getRandomValues(f),u)return!1;o(S=>({...S,fileList:[...s,p],inpFileName:"",isAddFile:!1,fileId:[...l,String(f)]}))},F=a=>{const f=a.currentTarget.value;f?s.includes(f)?o(S=>({...S,inpFileName:f,inpFileInvalid:!0})):o(S=>({...S,inpFileName:f,inpFileInvalid:!1})):o(S=>({...S,inpFileName:"",inpFileInvalid:!0}))},O=a=>{const f=a.currentTarget.value,S=new Uint32Array(1);crypto.getRandomValues(S),f?s.includes(f)?o(y=>({...y,inpFileName:f,inpFileInvalid:!0})):o(y=>({...y,inpFileName:f,inpFileInvalid:!1,fileList:[...s,p],fileId:[...l,String(S)],isAddFile:!1})):o(y=>({...y,inpFileName:"",isAddFile:!1,inpFileInvalid:!1}))};return m(I,{flexDirection:"column",children:[m(I,{onContextMenu:g,className:"folder",alignItems:"center",height:"8",lineHeight:"0",paddingLeft:"5",cursor:"pointer",_hover:{backgroundColor:"blackAlpha.200"},children:[m(I,{onClick:L,alignItems:"center",gap:"3",width:"full",height:"full",children:[e("img",{src:Q,alt:"arrow",className:h?"rotateX-90deg":""}),r]}),m("span",{children:[e("img",{onClick:c,src:H,alt:"dots"}),e("img",{onClick:k,src:M,alt:"plus"})]})]}),m(T,{display:h?"flex":"none",children:[s.map((a,f)=>e(ae,{fileName:a,folderName:r,setFolderState:o,id:l[f]},f)),x?e("form",{onSubmit:d,children:m(B,{isInvalid:u,children:[e(z,{type:"text",placeholder:"File name",autoFocus:!0,autoComplete:"off",onInput:F,onBlur:O,borderRadius:"none",display:"block",width:"calc(100% - 4rem)",marginLeft:"16",focusBorderColor:"none"}),u?e(J,{marginLeft:"5",children:p?`A file ${p} is already exist`:"Enter file name"}):null]})}):null]})]})},ce=N.memo(se);let de=[];const ue=()=>{var g;const r=(g=localStorage.getItem("notes"))!=null?g:JSON.stringify({folderList:[],isAddFolder:!1,inpFolderName:"",inpFolderInvalid:!1}),[n,t]=v.exports.useState(JSON.parse(r)),[i,o]=v.exports.useState(!1),s=v.exports.useRef(null),{folderList:l,inpFolderInvalid:h,inpFolderName:u,isAddFolder:p}=n;v.exports.useEffect(()=>{localStorage.setItem("notes",JSON.stringify(n)),de=l.map(c=>c)},[l]);const x=c=>{const d=c.currentTarget.value;d?l.includes(d)?t(F=>({...F,inpFolderName:d,inpFolderInvalid:!0})):t(F=>({...F,inpFolderName:d,inpFolderInvalid:!1})):t(F=>({...F,inpFolderName:"",inpFolderInvalid:!0}))},b=c=>{const d=c.currentTarget.value;d?l.includes(d)?t(F=>({...F,inpFolderName:d,inpFolderInvalid:!0})):t(F=>({...F,inpFolderName:d,isAddFolder:!1,inpFolderInvalid:!1,folderList:[...l,u]})):t(F=>({...F,inpFolderName:"",isAddFolder:!1,inpFolderInvalid:!1}))},L=c=>{if(c.preventDefault(),h)return!1;t(d=>({...d,folderList:[...l,u],inpFolderName:"",isAddFolder:!1}))},k=()=>{o(c=>!c)};return m(I,{userSelect:"none",children:[e($,{onClick:k,marginRight:"5",display:{md:"none"},marginTop:"8",marginLeft:"2",backgroundColor:"transparent",_hover:{backgroundColor:"transparent"},children:e(E,{src:D,alt:"hamburger icon"})}),m(I,{as:"nav",ref:s,width:{base:"20rem",md:"25rem"},height:"100vh",position:{base:"absolute",md:"static"},flexDirection:"column",paddingY:"8",borderRight:"1px solid #c5c5c5",transition:"all 500ms",transform:"auto",translateX:{base:i?"0":"-20rem",md:"0"},backgroundColor:"white",zIndex:"1",children:[m(I,{justifyContent:"space-between",alignItems:"center",children:[e(re,{}),e($,{onClick:k,marginRight:"5",display:{md:"none"},backgroundColor:"transparent",_hover:{backgroundColor:"transparent"},children:e(E,{src:D,alt:"hamburger icon"})})]}),m(T,{spacing:"8",marginTop:"10",height:"100%",overflowY:"scroll",children:[l.map((c,d)=>e(ce,{folderName:c,setFolder:t},d)),p?e("form",{onSubmit:L,children:m(B,{isInvalid:h,children:[e(z,{type:"text",placeholder:"Folder name",autoFocus:!0,autoComplete:"off",onInput:x,onBlur:b,borderRadius:"none",display:"block",width:"calc(100% - 1.25rem)",marginLeft:"5",focusBorderColor:"none"}),h?e(J,{marginLeft:"5",children:u?"A folder {inpFolderName} is already exist":"Enter folder name"}):null]})}):null]}),m(I,{flexDirection:"column",justifyContent:"space-around",height:"32",marginTop:"auto",children:[e(ne,{setFolderState:t}),e(le,{})]})]}),e(I,{as:"main",width:"full",overflowY:"scroll",position:{base:"relative"},zIndex:i?"-1":"0",children:e(W,{})})]})},he=N.memo(ue);export{he as default,de as folderName};
