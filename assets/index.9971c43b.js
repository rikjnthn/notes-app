import{f as R,j as e,R as N,c as w,r as I,u as V,F as X,a as v,b as m,L as U,d as j,T as P,e as T,S as B,O as W}from"./index.0c09acf1.js";import{F as J,a as z}from"./index.esm.e56c421e.js";import{I as H}from"./index.esm.06808fdd.js";import{B as $,c as q}from"./css-support.0caae1f2.js";function G(r,o=[]){const n=Object.assign({},r);for(const i of o)i in n&&delete n[i];return n}function K(r){const{loading:o,src:n,srcSet:i,onLoad:t,onError:s,crossOrigin:l,sizes:h,ignoreFallback:u}=r,[p,x]=I.exports.useState("pending");I.exports.useEffect(()=>{x(n?"loading":"pending")},[n]);const b=I.exports.useRef(),L=I.exports.useCallback(()=>{if(!n)return;k();const g=new Image;g.src=n,l&&(g.crossOrigin=l),i&&(g.srcset=i),h&&(g.sizes=h),o&&(g.loading=o),g.onload=c=>{k(),x("loaded"),t==null||t(c)},g.onerror=c=>{k(),x("failed"),s==null||s(c)},b.current=g},[n,l,i,h,t,s,o]),k=()=>{b.current&&(b.current.onload=null,b.current.onerror=null,b.current=null)};return V(()=>{if(!u)return p==="loading"&&L(),()=>{k()}},[p,L,u]),u?"loaded":p}var Q=(r,o)=>r!=="loaded"&&o==="beforeLoadOrError"||r==="failed"&&o==="onError",A=R(function(o,n){const{htmlWidth:i,htmlHeight:t,alt:s,...l}=o;return e("img",{width:i,height:t,ref:n,alt:s,...l})});A.displayName="NativeImage";var E=R(function(o,n){const{fallbackSrc:i,fallback:t,src:s,srcSet:l,align:h,fit:u,loading:p,ignoreFallback:x,crossOrigin:b,fallbackStrategy:L="beforeLoadOrError",referrerPolicy:k,...g}=o,c=i!==void 0||t!==void 0,d=p!=null||x||!c,F=K({...o,ignoreFallback:d}),O=Q(F,L),C={ref:n,objectFit:u,objectPosition:h,...d?g:G(g,["onError","onLoad"])};return O?t||N.createElement(w.img,{as:A,className:"chakra-image__placeholder",src:i,...C}):N.createElement(w.img,{as:A,src:s,srcSet:l,crossOrigin:b,loading:p,referrerPolicy:k,className:"chakra-image",...C})});E.displayName="Image";R((r,o)=>N.createElement(w.img,{ref:o,as:A,className:"chakra-image",...r}));const M="/notes-app/assets/delete.1cc9322c.svg",Z="/notes-app/assets/arrow.ed0c2fa2.svg",Y="/notes-app/assets/plus.a40c5c74.svg",ee="/notes-app/assets/setting.cb2d363c.svg",D="/notes-app/assets/hamburger-icon.553c2f89.svg",_=({path:r,name:o})=>e(U,{as:j,to:r,color:"blackAlpha.700",textDecoration:"underline",_hover:{color:"#2c2c2c"},children:o}),re=()=>{const[r,o]=I.exports.useState({useName:"User",haveLogin:!0,photo:"''"});return e(X,{children:r.haveLogin?e(v,{as:"span",title:"User",alignItems:"center",height:"fit-content",paddingLeft:"5",fontSize:"lg",cursor:"context-menu",_before:{content:r.photo,display:"inline-block",width:"50px",height:"50px",borderRadius:"full",marginRight:"10px",backgroundColor:"hotpink"},children:"User"}):m(v,{width:"full",height:"fit-content",justifyContent:"center",gap:"3",children:[e(_,{path:"login",name:"Login"}),e("span",{children:"|"}),e(_,{path:"sign-up",name:"Sign Up"})]})})},ne=N.memo(re),te=({setFolderState:r})=>m(v,{onClick:()=>{r(n=>({...n,isAddFolder:!0}))},gap:"3",alignItems:"center",paddingLeft:"5",height:"10",_hover:{backgroundColor:"blackAlpha.200"},children:[e("img",{src:Y,alt:"plus"}),e(P,{as:"span",children:"Add Folder"})]}),oe=N.memo(te),le=()=>m(v,{gap:"3",alignItems:"center",height:"10",paddingLeft:"5",_hover:{backgroundColor:"blackAlpha.200"},children:[e("img",{src:ee,alt:"setting"}),e(P,{children:"Setting"})]}),ie=N.memo(le),ae=({fileName:r,folderName:o,setFolderState:n,id:i})=>{const[t,s]=I.exports.useState(!1),{FileID:l}=T(),h=()=>{i===l&&(location.href=`${location.origin}/notes-app/`),n(u=>({...u,fileList:[...u.fileList.filter(p=>p!==r)],fileId:[...u.fileId.filter(p=>p!==i)]})),localStorage.removeItem(i)};return I.exports.useEffect(()=>{s(l===i?()=>!0:()=>!1),t&&location.reload()},[l]),m(v,{className:"file",height:"8",alignItems:"center",backgroundColor:t?"blackAlpha.200":"transparent",_hover:{backgroundColor:"blackAlpha.200"},children:[e(U,{as:j,to:`${o}/${i}`,display:"flex",paddingInline:"0",paddingLeft:"16",width:"full",height:"full",alignItems:"center",marginRight:"auto",_hover:{textDecoration:"none"},children:r}),e("img",{onClick:h,src:M,alt:""})]})},se=N.memo(ae);const ce=({folderName:r,setFolder:o})=>{var C;const n=(C=localStorage.getItem(r))!=null?C:JSON.stringify({isOpen:!1,fileList:[],inpFileInvalid:!1,inpFileName:"",isAddFile:!1,fileId:[]}),[i,t]=I.exports.useState(JSON.parse(n)),{fileList:s,fileId:l,isOpen:h,inpFileInvalid:u,inpFileName:p,isAddFile:x}=i,{FolderName:b}=T();I.exports.useEffect(()=>{localStorage.setItem(r,JSON.stringify(i)),localStorage.setItem(`${r} fileIdList`,JSON.stringify([...l]))},[s]);const L=()=>{t(a=>({...a,isOpen:!h}))},k=()=>{t(a=>({...a,isOpen:!0})),t(a=>({...a,isAddFile:!0}))},g=a=>{a.preventDefault()},c=()=>{o(a=>({...a,folderList:[...a.folderList.filter(f=>f!==r)]})),t(a=>({...a,fileList:[],fileId:[],isOpen:!1})),l.forEach(a=>{localStorage.removeItem(a)}),localStorage.removeItem(r),localStorage.removeItem(`${r} fileIdList`),b===r&&(location.href=`${location.origin}/notes-app/`)},d=a=>{a.preventDefault();const f=new Uint32Array(1);if(crypto.getRandomValues(f),u)return!1;t(S=>({...S,fileList:[...s,p],inpFileName:"",isAddFile:!1,fileId:[...l,String(f)]}))},F=a=>{const f=a.currentTarget.value;f?s.includes(f)?t(S=>({...S,inpFileName:f,inpFileInvalid:!0})):t(S=>({...S,inpFileName:f,inpFileInvalid:!1})):t(S=>({...S,inpFileName:"",inpFileInvalid:!0}))},O=a=>{const f=a.currentTarget.value,S=new Uint32Array(1);crypto.getRandomValues(S),f?s.includes(f)?t(y=>({...y,inpFileName:f,inpFileInvalid:!0})):t(y=>({...y,inpFileName:f,inpFileInvalid:!1,fileList:[...s,p],fileId:[...l,String(S)],isAddFile:!1})):t(y=>({...y,inpFileName:"",isAddFile:!1,inpFileInvalid:!1}))};return m(v,{flexDirection:"column",children:[m(v,{onContextMenu:g,className:"folder",alignItems:"center",height:"8",lineHeight:"0",paddingLeft:"5",cursor:"pointer",_hover:{backgroundColor:"blackAlpha.200"},children:[m(v,{onClick:L,alignItems:"center",gap:"3",width:"full",height:"full",children:[e("img",{src:Z,alt:"arrow",className:h?"rotateX-90deg":""}),r]}),m("span",{children:[e("img",{onClick:c,src:M,alt:"dots"}),e("img",{onClick:k,src:Y,alt:"plus"})]})]}),m(B,{display:h?"flex":"none",children:[s.map((a,f)=>e(se,{fileName:a,folderName:r,setFolderState:t,id:l[f]},f)),x?e("form",{onSubmit:d,children:m(J,{isInvalid:u,children:[e(H,{type:"text",placeholder:"File name",autoFocus:!0,autoComplete:"off",onInput:F,onBlur:O,borderRadius:"none",display:"block",width:"calc(100% - 4rem)",marginLeft:"16",focusBorderColor:"none"}),u?e(z,{marginLeft:"5",children:p?`A file ${p} is already exist`:"Enter file name"}):null]})}):null]})]})},de=N.memo(ce);let ue=[];const pe=()=>{var g;const r=(g=localStorage.getItem("notes"))!=null?g:JSON.stringify({folderList:[],isAddFolder:!1,inpFolderName:"",inpFolderInvalid:!1}),[o,n]=I.exports.useState(JSON.parse(r)),[i,t]=I.exports.useState(!1),s=I.exports.useRef(null),{folderList:l,inpFolderInvalid:h,inpFolderName:u,isAddFolder:p}=o;I.exports.useEffect(()=>{localStorage.setItem("notes",JSON.stringify(o)),ue=l.map(c=>c)},[l]);const x=c=>{const d=c.currentTarget.value;d?l.includes(d)?n(F=>({...F,inpFolderName:d,inpFolderInvalid:!0})):n(F=>({...F,inpFolderName:d,inpFolderInvalid:!1})):n(F=>({...F,inpFolderName:"",inpFolderInvalid:!0}))},b=c=>{const d=c.currentTarget.value;d?l.includes(d)?n(F=>({...F,inpFolderName:d,inpFolderInvalid:!0})):n(F=>({...F,inpFolderName:d,isAddFolder:!1,inpFolderInvalid:!1,folderList:[...l,u]})):n(F=>({...F,inpFolderName:"",isAddFolder:!1,inpFolderInvalid:!1}))},L=c=>{if(c.preventDefault(),h)return!1;n(d=>({...d,folderList:[...l,u],inpFolderName:"",isAddFolder:!1}))},k=()=>{t(c=>!c)};return m(v,{userSelect:"none",children:[e($,{onClick:k,marginRight:"5",display:{md:"none"},marginTop:"8",marginLeft:"2",backgroundColor:"transparent",_hover:{backgroundColor:"transparent"},children:e(E,{src:D,alt:"hamburger icon"})}),m(v,{as:"nav",ref:s,width:{base:"20rem",md:"25rem"},height:q("height","1dvh")?"100dvh":"100vh",position:{base:"absolute",md:"static"},flexDirection:"column",paddingY:"8",borderRight:"1px solid #c5c5c5",transition:"all 500ms",transform:"auto",translateX:{base:i?"0":"-20rem",md:"0"},backgroundColor:"white",zIndex:"1",children:[m(v,{justifyContent:"space-between",alignItems:"center",children:[e(ne,{}),e($,{onClick:k,marginRight:"5",display:{md:"none"},backgroundColor:"transparent",_hover:{backgroundColor:"transparent"},children:e(E,{src:D,alt:"hamburger icon"})})]}),m(B,{spacing:"8",marginTop:"10",height:"100%",overflowY:"scroll",children:[l.map((c,d)=>e(de,{folderName:c,setFolder:n},d)),p?e("form",{onSubmit:L,children:m(J,{isInvalid:h,children:[e(H,{type:"text",placeholder:"Folder name",autoFocus:!0,autoComplete:"off",onInput:x,onBlur:b,borderRadius:"none",display:"block",width:"calc(100% - 1.25rem)",marginLeft:"5",focusBorderColor:"none"}),h?e(z,{marginLeft:"5",children:u?"A folder {inpFolderName} is already exist":"Enter folder name"}):null]})}):null]}),m(v,{flexDirection:"column",justifyContent:"space-around",height:"32",marginTop:"auto",children:[e(oe,{setFolderState:n}),e(ie,{})]})]}),e(v,{as:"main",width:"full",overflowY:"scroll",position:{base:"relative"},zIndex:i?"-1":"0",children:e(W,{})})]})},Fe=N.memo(pe);export{Fe as default,ue as folderName};
