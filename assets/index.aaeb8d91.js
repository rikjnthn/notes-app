import{f as R,j as e,R as N,c as w,r as I,u as X,F as W,a as v,b as m,L as j,d as P,T,e as B,S as z,O as q}from"./index.5bd66681.js";import{F as J,a as H,p as $}from"./purify.es.8ffd879b.js";import{I as M}from"./index.esm.e1230aa7.js";import{B as D,c as G}from"./css-support.21f512f5.js";function K(r,o=[]){const n=Object.assign({},r);for(const l of o)l in n&&delete n[l];return n}function Q(r){const{loading:o,src:n,srcSet:l,onLoad:t,onError:s,crossOrigin:i,sizes:h,ignoreFallback:u}=r,[p,x]=I.exports.useState("pending");I.exports.useEffect(()=>{x(n?"loading":"pending")},[n]);const b=I.exports.useRef(),L=I.exports.useCallback(()=>{if(!n)return;k();const g=new Image;g.src=n,i&&(g.crossOrigin=i),l&&(g.srcset=l),h&&(g.sizes=h),o&&(g.loading=o),g.onload=c=>{k(),x("loaded"),t==null||t(c)},g.onerror=c=>{k(),x("failed"),s==null||s(c)},b.current=g},[n,i,l,h,t,s,o]),k=()=>{b.current&&(b.current.onload=null,b.current.onerror=null,b.current=null)};return X(()=>{if(!u)return p==="loading"&&L(),()=>{k()}},[p,L,u]),u?"loaded":p}var Z=(r,o)=>r!=="loaded"&&o==="beforeLoadOrError"||r==="failed"&&o==="onError",A=R(function(o,n){const{htmlWidth:l,htmlHeight:t,alt:s,...i}=o;return e("img",{width:l,height:t,ref:n,alt:s,...i})});A.displayName="NativeImage";var E=R(function(o,n){const{fallbackSrc:l,fallback:t,src:s,srcSet:i,align:h,fit:u,loading:p,ignoreFallback:x,crossOrigin:b,fallbackStrategy:L="beforeLoadOrError",referrerPolicy:k,...g}=o,c=l!==void 0||t!==void 0,d=p!=null||x||!c,F=Q({...o,ignoreFallback:d}),O=Z(F,L),y={ref:n,objectFit:u,objectPosition:h,...d?g:K(g,["onError","onLoad"])};return O?t||N.createElement(w.img,{as:A,className:"chakra-image__placeholder",src:l,...y}):N.createElement(w.img,{as:A,src:s,srcSet:i,crossOrigin:b,loading:p,referrerPolicy:k,className:"chakra-image",...y})});E.displayName="Image";R((r,o)=>N.createElement(w.img,{ref:o,as:A,className:"chakra-image",...r}));const Y="/notes-app/assets/delete.1cc9322c.svg",ee="/notes-app/assets/arrow.ed0c2fa2.svg",V="/notes-app/assets/plus.a40c5c74.svg",re="/notes-app/assets/setting.cb2d363c.svg",_="/notes-app/assets/hamburger-icon.553c2f89.svg",U=({path:r,name:o})=>e(j,{as:P,to:r,color:"blackAlpha.700",textDecoration:"underline",_hover:{color:"#2c2c2c"},children:o}),ne=()=>{const[r,o]=I.exports.useState({useName:"User",haveLogin:!0,photo:"''"});return e(W,{children:r.haveLogin?e(v,{as:"span",title:"User",alignItems:"center",height:"fit-content",paddingLeft:"5",fontSize:"lg",cursor:"context-menu",_before:{content:r.photo,display:"inline-block",width:"50px",height:"50px",borderRadius:"full",marginRight:"10px",backgroundColor:"hotpink"},children:"User"}):m(v,{width:"full",height:"fit-content",justifyContent:"center",gap:"3",children:[e(U,{path:"login",name:"Login"}),e("span",{children:"|"}),e(U,{path:"sign-up",name:"Sign Up"})]})})},te=N.memo(ne),oe=({setFolderState:r})=>m(v,{onClick:()=>{r(n=>({...n,isAddFolder:!0}))},gap:"3",alignItems:"center",paddingLeft:"5",height:"10",_hover:{backgroundColor:"blackAlpha.200"},children:[e("img",{src:V,alt:"plus"}),e(T,{as:"span",children:"Add Folder"})]}),ie=N.memo(oe),le=()=>m(v,{gap:"3",alignItems:"center",height:"10",paddingLeft:"5",_hover:{backgroundColor:"blackAlpha.200"},children:[e("img",{src:re,alt:"setting"}),e(T,{children:"Setting"})]}),ae=N.memo(le),se=({fileName:r,folderName:o,setFolderState:n,id:l})=>{const[t,s]=I.exports.useState(!1),{FileID:i}=B(),h=()=>{l===i&&(location.href=`${location.origin}/notes-app/`),n(u=>({...u,fileList:[...u.fileList.filter(p=>p!==r)],fileId:[...u.fileId.filter(p=>p!==l)]})),localStorage.removeItem(l)};return I.exports.useEffect(()=>{s(i===l?()=>!0:()=>!1),t&&location.reload()},[i]),m(v,{className:"file",height:"8",alignItems:"center",backgroundColor:t?"blackAlpha.200":"transparent",_hover:{backgroundColor:"blackAlpha.200"},children:[e(j,{as:P,to:`${o}/${l}`,display:"flex",paddingInline:"0",paddingLeft:"16",width:"full",height:"full",alignItems:"center",marginRight:"auto",_hover:{textDecoration:"none"},children:r}),e("img",{onClick:h,src:Y,alt:""})]})},ce=N.memo(se);const de=({folderName:r,setFolder:o})=>{var y;const n=(y=localStorage.getItem(r))!=null?y:JSON.stringify({isOpen:!1,fileList:[],inpFileInvalid:!1,inpFileName:"",isAddFile:!1,fileId:[]}),[l,t]=I.exports.useState(JSON.parse(n)),{fileList:s,fileId:i,isOpen:h,inpFileInvalid:u,inpFileName:p,isAddFile:x}=l,{FolderName:b}=B();I.exports.useEffect(()=>{localStorage.setItem(r,JSON.stringify(l)),localStorage.setItem(`${r} fileIdList`,JSON.stringify([...i]))},[s]);const L=()=>{t(a=>({...a,isOpen:!h}))},k=()=>{t(a=>({...a,isOpen:!0})),t(a=>({...a,isAddFile:!0}))},g=a=>{a.preventDefault()},c=()=>{o(a=>({...a,folderList:[...a.folderList.filter(f=>f!==r)]})),t(a=>({...a,fileList:[],fileId:[],isOpen:!1})),i.forEach(a=>{localStorage.removeItem(a)}),localStorage.removeItem(r),localStorage.removeItem(`${r} fileIdList`),b===r&&(location.href=`${location.origin}/notes-app/`)},d=a=>{a.preventDefault();const f=new Uint32Array(1);if(crypto.getRandomValues(f),u)return!1;t(S=>({...S,fileList:[...s,p],inpFileName:"",isAddFile:!1,fileId:[...i,String(f)]}))},F=a=>{const f=$.sanitize(a.currentTarget.value);f?s.includes(f)?t(S=>({...S,inpFileName:f,inpFileInvalid:!0})):t(S=>({...S,inpFileName:f,inpFileInvalid:!1})):t(S=>({...S,inpFileName:"",inpFileInvalid:!0}))},O=a=>{const f=$.sanitize(a.currentTarget.value),S=new Uint32Array(1);crypto.getRandomValues(S),f?s.includes(f)?t(C=>({...C,inpFileName:f,inpFileInvalid:!0})):t(C=>({...C,inpFileName:f,inpFileInvalid:!1,fileList:[...s,p],fileId:[...i,String(S)],isAddFile:!1})):t(C=>({...C,inpFileName:"",isAddFile:!1,inpFileInvalid:!1}))};return m(v,{flexDirection:"column",children:[m(v,{onContextMenu:g,className:"folder",alignItems:"center",height:"8",lineHeight:"0",paddingLeft:"5",cursor:"pointer",_hover:{backgroundColor:"blackAlpha.200"},children:[m(v,{onClick:L,alignItems:"center",gap:"3",width:"full",height:"full",children:[e("img",{src:ee,alt:"arrow",className:h?"rotateX-90deg":""}),r]}),m("span",{children:[e("img",{onClick:c,src:Y,alt:"dots"}),e("img",{onClick:k,src:V,alt:"plus"})]})]}),m(z,{display:h?"flex":"none",children:[s.map((a,f)=>e(ce,{fileName:a,folderName:r,setFolderState:t,id:i[f]},f)),x?e("form",{onSubmit:d,children:m(J,{isInvalid:u,children:[e(M,{type:"text",placeholder:"File name",autoFocus:!0,autoComplete:"off",onInput:F,onBlur:O,borderRadius:"none",display:"block",width:"calc(100% - 4rem)",marginLeft:"16",focusBorderColor:"none"}),u?e(H,{marginLeft:"5",children:p?`A file ${p} is already exist`:"Enter file name"}):null]})}):null]})]})},ue=N.memo(de);let pe=[];const fe=()=>{var g;const r=(g=localStorage.getItem("notes"))!=null?g:JSON.stringify({folderList:[],isAddFolder:!1,inpFolderName:"",inpFolderInvalid:!1}),[o,n]=I.exports.useState(JSON.parse(r)),[l,t]=I.exports.useState(!1),s=I.exports.useRef(null),{folderList:i,inpFolderInvalid:h,inpFolderName:u,isAddFolder:p}=o;I.exports.useEffect(()=>{localStorage.setItem("notes",JSON.stringify(o)),pe=i.map(c=>c)},[i]);const x=c=>{const d=c.currentTarget.value;d?i.includes(d)?n(F=>({...F,inpFolderName:d,inpFolderInvalid:!0})):n(F=>({...F,inpFolderName:d,inpFolderInvalid:!1})):n(F=>({...F,inpFolderName:"",inpFolderInvalid:!0}))},b=c=>{const d=c.currentTarget.value;d?i.includes(d)?n(F=>({...F,inpFolderName:d,inpFolderInvalid:!0})):n(F=>({...F,inpFolderName:d,isAddFolder:!1,inpFolderInvalid:!1,folderList:[...i,u]})):n(F=>({...F,inpFolderName:"",isAddFolder:!1,inpFolderInvalid:!1}))},L=c=>{if(c.preventDefault(),h)return!1;n(d=>({...d,folderList:[...i,u],inpFolderName:"",isAddFolder:!1}))},k=()=>{t(c=>!c)};return m(v,{userSelect:"none",children:[e(D,{onClick:k,marginRight:"5",display:{md:"none"},marginTop:"8",marginLeft:"2",backgroundColor:"transparent",_hover:{backgroundColor:"transparent"},children:e(E,{src:_,alt:"hamburger icon"})}),m(v,{as:"nav",ref:s,width:{base:"20rem",md:"25rem"},height:G("height","1dvh")?"100dvh":"100vh",position:{base:"absolute",md:"static"},flexDirection:"column",paddingY:"8",borderRight:"1px solid #c5c5c5",transition:"all 500ms",transform:"auto",translateX:{base:l?"0":"-20rem",md:"0"},backgroundColor:"white",zIndex:"1",children:[m(v,{justifyContent:"space-between",alignItems:"center",children:[e(te,{}),e(D,{onClick:k,marginRight:"5",display:{md:"none"},backgroundColor:"transparent",_hover:{backgroundColor:"transparent"},children:e(E,{src:_,alt:"hamburger icon"})})]}),m(z,{spacing:"8",marginTop:"10",height:"100%",overflowY:"scroll",children:[i.map((c,d)=>e(ue,{folderName:c,setFolder:n},d)),p?e("form",{onSubmit:L,children:m(J,{isInvalid:h,children:[e(M,{type:"text",placeholder:"Folder name",autoFocus:!0,autoComplete:"off",onInput:x,onBlur:b,borderRadius:"none",display:"block",width:"calc(100% - 1.25rem)",marginLeft:"5",focusBorderColor:"none"}),h?e(H,{marginLeft:"5",children:u?"A folder {inpFolderName} is already exist":"Enter folder name"}):null]})}):null]}),m(v,{flexDirection:"column",justifyContent:"space-around",height:"32",marginTop:"auto",children:[e(ie,{setFolderState:n}),e(ae,{})]})]}),e(v,{as:"main",width:"full",overflowY:"scroll",position:{base:"relative"},zIndex:l?"-1":"0",children:e(q,{})})]})},ve=N.memo(fe);export{ve as default,pe as folderName};
